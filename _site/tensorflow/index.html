<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>tensorflow的安装 - Blog - wellstone_cheng</title>
	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#311e3e">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#311e3e">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#311e3e">




	<!-- Google Fonts 1
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">-->





	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">

	<!-- <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"> </script> -->
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


	<!--百度统计-->
	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "https://hm.baidu.com/hm.js?";
		  var s = document.getElementsByTagName("script")[0];
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>



	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<script>
	  (adsbygoogle = window.adsbygoogle || []).push({
	    google_ad_client: "ca-pub-4924092018203651",
	    enable_page_level_ads: true
	  });
	</script>

</head>

<body>
  <div class="flex-container">
  <header class="main-header">
  <div class="wrapper">
    <div class="header-flex">
      <div class="menu-icon-container">
        <span class="menu-icon"><i class="fa fa-bars" aria-hidden="true"></i></span>
      </div>
      <nav class="main-nav">
        <span class="menu-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
        <!--<ul style="height:800px;overflow-y:scroll;overflow-y:auto;"> -->
        <ul>
          
            

            

            

            

            

            

            

            

            

            

            

            

            

			 <li><a  href="myblog/python"  data-hover="python">python(1)</a></li>
		 
            

            

            

            

            

            

            

            

            

            

            

            

            

			 <li><a  href="myblog/pytorch"  data-hover="pytorch">pytorch(5)</a></li>
		 
            

            

            

            

            

            

            

            

            

            

            

            

            

			 <li><a  href="myblog/tensorflow"  data-hover="tensorflow">tensorflow(1)</a></li>
		 
            

            

            

            

            

            

            

            

            

            

            

            

            

			 <li><a  href="myblog/githubio"  data-hover="githubio">githubio(1)</a></li>
		 
          <!--<li style="margin-bottom:200px;"><a href="/about">About(1)</a></li>-->
        </ul>
      </nav>
      <p class="logo"><a href="/">wellstone_cheng</a></p>


		<div class="navbar-container">

		<div class="search-icon"><a><i class="fa fa-search" aria-hidden="true"></i></a></div>

			<div class="navbar-menu">
			   
				<a href="https://www.wellstone-cheng.github.io"  data-hover="Home">Home</a>  <!--title="访问 Home"-->
				<!--<a href="https://www.wellstone-cheng.github.io">Home</a>-->
					
				<a href="/blogdemo/about"  data-hover="About">About</a>  <!--title="访问 About"-->
				<!--<a href="/blogdemo/about">About</a>-->
					
			</div>


			<div class="navbar-mobile-menu" onclick="">
				<span class="icon-menu cross"><span class="middle"></span></span>
				<ul>
				   
					 <li><a href="https://www.wellstone-cheng.github.io"data-hover="Home">Home</a></li>  <!--title="访问 Home"-->
					 <!--<li><a href="https://www.wellstone-cheng.github.io">Home</a></li>-->
				   
					 <li><a href="/blogdemo/about"data-hover="About">About</a></li>  <!--title="访问 About"-->
					 <!--<li><a href="/blogdemo/about">About</a></li>-->
				   
				</ul>
			</div>



		</div>

    <!--  <div class="search-icon-container">
	    <a href="/" style="text-decoration: none; color: inherit;margin-right:20px;">Home</a>
		<a href="/about" style=" text-decoration: none; color: inherit;margin-right:20px;">About</a>
        <span class="search-icon"><a><i class="fa fa-search" aria-hidden="true"></i></a></span>
      </div> -->


    </div>
  </div>
</header> <!-- End Header -->

  <article class="article-page">
    <div class="wrapper">
      <div class="page-content">
        <div class="header-page">
          <h1 class="page-title">tensorflow的安装</h1>
          <div class="page-date"><time datetime="2019-10-27 08:05:00 +0800">2019, Oct 27</time>
		  <span id="busuanzi_container_page_pv"> | 访问量：<span id="busuanzi_value_page_pv"></span> 次</span>
		  </div>
        </div>
        <h1 id="1-tensorflow-安装">1 Tensorflow 安装</h1>

<h2 id="11-基于docker安装">1.1 基于docker安装</h2>
<p>docker方式安装，并以jupyter server运行，可以通过网页远程访问</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -it -p 8888:8888 tensorflow/tensorflow:nightly-py3-jupyter
</code></pre></div></div>
<p>注：可以在jupyter页面通过new Terminal打开终端进行操作。</p>

<h2 id="12-基于python安装">1.2 基于Python安装</h2>
<ul>
  <li>
    <p>先安装python，参照python study篇章</p>
  </li>
  <li>
    <p>然后再直接安装tensorflow</p>
  </li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> pip3 install --user --upgrade tensorflow  # install in $HOME
</code></pre></div></div>

<ul>
  <li>验证安装</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 -c "import tensorflow as tf; print(tf.reduce_sum(tf.random.normal([1000, 1000])))"
</code></pre></div></div>

<h2 id="13-本地基于pip虚拟环境安装">1.3 本地基于pip虚拟环境安装</h2>
<ul>
  <li>
    <p>先安装python，参照python study篇章</p>
  </li>
  <li>
    <p>安装virtualenv</p>
  </li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install -U virtualenv 
</code></pre></div></div>

<ul>
  <li>启动虚拟环境</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        virtualenv --system-site-packages -p python3 ./venv
        source ./venv/bin/activate  # sh, bash, ksh, or zsh
（venv） pip install --upgrade pip
（venv） pip list  # show packages installed within the virtual environment
（venv） deactivate  # don't exit until you're done using TensorFlow
</code></pre></div></div>

<ul>
  <li>在virtualenv安装tensorflow</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>（venv）pip install --upgrade tensorflow
  Collecting tensorflow
  Cache entry deserialization failed, entry ignored
  Downloading https://files.pythonhosted.org/packages/de/f0/96fb2e0412ae9692dbf400e5b04432885f677ad6241c088ccc5fe7724d69/tensorflow-1.14.0-cp36-cp36m-manylinux1_x86_64.whl (109.2MB)
</code></pre></div></div>

<ul>
  <li>验证安装</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>（venv）python -c "import tensorflow as tf;print(tf.reduce_sum(tf.random.normal([1000, 1000])))"
2019-11-02 22:41:53.733300: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-11-02 22:41:53.752820: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3408000000 Hz
2019-11-02 22:41:53.753392: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x50a5470 executing computations on platform Host. Devices:
2019-11-02 22:41:53.753417: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version
tf.Tensor(1447.9882, shape=(), dtype=float32)
</code></pre></div></div>
<h2 id="14本地基于conda虚拟环境安装">1.4本地基于conda虚拟环境安装</h2>

<ul>
  <li>
    <p>先安装python，参照python study篇章</p>
  </li>
  <li>
    <p>启动虚拟环境</p>
  </li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        conda create -n venv pip python=3.7  # select python version
        source activate venv
（venv） pip install --ignore-installed --upgrade packageURL
（venv） source deactivate
</code></pre></div></div>

<ul>
  <li>在virtualenv安装tensorflow</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>（venv）pip install --upgrade tensorflow
</code></pre></div></div>

<ul>
  <li>验证安装</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>（venv）python -c "import tensorflow as tf;print(tf.reduce_sum(tf.random.normal([1000, 1000])))"
</code></pre></div></div>

<h2 id="15-安装过程遇到的问题及解决方案">1.5 安装过程遇到的问题及解决方案</h2>

<h3 id="151-cache-entry-deserialization-failed">1.5.1 Cache entry deserialization failed</h3>

<ul>
  <li>error details</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># pip3 install --upgrade tensorflow
Collecting tensorflow
  Cache entry deserialization failed, entry ignored
</code></pre></div></div>
<ul>
  <li>sulotion：升级pip</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install --upgrade pip
</code></pre></div></div>

<h3 id="152-futurewarning">1.5.2 FutureWarning</h3>

<ul>
  <li>error details</li>
</ul>

<p>环境1 报错信息：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># python3 -c "import tensorflow as tf;print(tf.reduce_sum(tf.random.normal([1000, 1000])))"
2019-11-03 03:50:03.730110: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-11-03 03:50:03.750617: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3408000000 Hz
2019-11-03 03:50:03.751483: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x4ebcdc0 executing computations on platform Host. Devices:
2019-11-03 03:50:03.751528: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version
tf.Tensor(398.2649, shape=(), dtype=float32)
</code></pre></div></div>

<p>环境2 保报错信息：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 -c "import tensorflow as tf;print(tf.reduce_sum(tf.random.normal([1000, 1000])))"
/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/dtypes.py:516: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  _np_qint8 = np.dtype([("qint8", np.int8, 1)])
</code></pre></div></div>

<p>-Analysis
  环境1： Python 3.6.8 + pip 19.3.1 + numpy 1.17.3 +tensorflow 2.0.0 –&gt; no this error
  环境2： Python 3.6.8 + pip 9.0.1 + numpy 1.17.3 +tensorflow 1.14.0 –&gt; have this error</p>

<ul>
  <li>solution
 将环境2的numpy版本降至1.16.0</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># pip3 install numpy==1.16.0
# python3 -c "import tensorflow as tf;print(tf.reduce_sum(tf.random.normal([1000, 1000])))"
Tensor("Sum:0", shape=(), dtype=float32)
</code></pre></div></div>

<h3 id="153-your-cpu-supports-instructions-that-this-tensorflow-binary-was-not-compiled-to-use-avx2-fma">1.5.3 Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA</h3>

<ul>
  <li>error details</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python -c "import tensorflow as tf;print(tf.reduce_sum(tf.random.normal([1000, 1000])))"
2019-11-02 22:41:53.733300: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-11-02 22:41:53.752820: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3408000000 Hz
2019-11-02 22:41:53.753392: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x50a5470 executing computations on platform Host. Devices:
2019-11-02 22:41:53.753417: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version
tf.Tensor(1447.9882, shape=(), dtype=float32)
</code></pre></div></div>
<ul>
  <li>
    <p>Analysis</p>

    <p>环境3：Python 3.7.5 + pip 19.3.1 + numpy 1.17.3 +tensorflow 2.0.0 –&gt; have this error
环境2: Python 3.6.8 + pip 9.0.1 + numpy 1.16.0 +tensorflow 1.14.0 –&gt; no this error
环境4: Python 3.6.8 + pip 19.3.1 + numpy 1.17.3 +tf-nightly 2.1.0 –&gt; have this error,but in jupyter no error</p>
  </li>
  <li>
    <p>solution
 更换tensorflow版本？</p>
  </li>
</ul>

<h2 id="16-验证">1.6 验证</h2>
<ul>
  <li>Python输入</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import tensorflow as tf;
print(tf.reduce_sum(tf.random.normal([1000, 1000])))
</code></pre></div></div>

<ul>
  <li>输出</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tf.Tensor(-380.3409, shape=(), dtype=float32)
</code></pre></div></div>

  </article>
  <div class="search-box">
  <div class="wrapper">
    <div class="search-grid">
      <form class="search-form">
        <div id="search-container">
          <input type="text" id="search-input" class="search" placeholder="Search">
        </div>
      </form>
      <ul id="results-container" class="results-search"  style="height:400px;overflow-y:scroll;overflow-y:auto;"></ul>
      <div class="icon-close-container">
        <span class="search-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
      </div>
    </div>
  </div>
</div>

  <footer class="main-footer">
	<div class="footer-social">
		<div class="footer-container clearfix">
			<div class="social-list">
			</div>
		</div>
	</div>

	<div class="copyright">
		<p>2020 &copy; wellstone_cheng</p>
	</div>

</footer> <!-- End Footer -->

</div>

  
  
<div class="top" title="Top"><i class="fa fa-chevron-up" aria-hidden="true"></i></div> <!-- End Top Scroll -->
  <!-- JS -->
<script src="/assets/js/jquery-3.2.1.min.js"></script>
<script src="/assets/js/jekyll-search.js"></script>
<script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
    noResultsText: 'No results found',
    fuzzy: false,
    exclude: ['Welcome']
  });
</script>
<script src="/assets/js/main.js"></script>

  <!--<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
